<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.1.1">Jekyll</generator><link href="https://shiragicord.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://shiragicord.github.io/" rel="alternate" type="text/html" /><updated>2020-09-22T21:14:13+09:00</updated><id>https://shiragicord.github.io/feed.xml</id><title type="html">しらぎのLogger</title><entry><title type="html">Android 10版 システムアプリの強制無効化方法</title><link href="https://shiragicord.github.io/200922/disable-docomo/" rel="alternate" type="text/html" title="Android 10版 システムアプリの強制無効化方法" /><published>2020-09-22T00:00:00+09:00</published><updated>2020-09-22T00:00:00+09:00</updated><id>https://shiragicord.github.io/200922/disable_docomo</id><content type="html" xml:base="https://shiragicord.github.io/200922/disable-docomo/">&lt;blockquote&gt;
  &lt;p&gt;以下の内容は、docomo版Galaxy A20 (SC-02M) の Android 10 で動作確認をしています。
他の機種や、Androidのバージョンによっては使えない可能性もあります。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;有名なコマンドも引き続き利用可能&quot;&gt;有名なコマンドも引き続き利用可能&lt;/h2&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;adb shell pm uninstall -k --user 0 &amp;lt;package name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;このコマンドは引き続き使えます。&lt;/p&gt;

&lt;h2 id=&quot;実はあまり知られていないコマンド&quot;&gt;実はあまり知られていないコマンド&lt;/h2&gt;

&lt;p&gt;次のコマンドも使えることを確認しました。&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;adb shell pm disable-user &amp;lt;package name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;それぞれの挙動の違い&quot;&gt;それぞれの挙動の違い&lt;/h2&gt;
&lt;h3 id=&quot;uninstall&quot;&gt;uninstall&lt;/h3&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;adb shell pm uninstall -k --user 0 &amp;lt;package name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;を実行すると、&lt;strong&gt;アプリがアンインストールされます&lt;/strong&gt;。(厳密には/system配下に残存)&lt;/p&gt;

&lt;p&gt;Androidの設定画面のアプリ一覧からも姿を消すため、&lt;/p&gt;

&lt;p&gt;復活させるには以下のコマンドを打つ必要があります。&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;adb shell pm install-existing &amp;lt;package name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;disable-user&quot;&gt;disable-user&lt;/h3&gt;
&lt;p&gt;試しに実行してみました。&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ adb shell pm disable-user com.android.contacts
Package com.android.contacts new state: disabled-user
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;出力結果の通り、このコマンドは、パッケージに「ユーザーで無効化」属性が付与されます。&lt;/p&gt;

&lt;p&gt;つまり、&lt;strong&gt;アプリが無効化&lt;/strong&gt;されています。&lt;/p&gt;

&lt;p&gt;そのため、Androidの設定画面から、アプリが無効化されていることが確認できます。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/200922/disable_docomo/disabled_screenshot.jpg&quot; alt=&quot;設定画面から「無効」が確認できる。&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;強制的に無効化できる&lt;/strong&gt;ため、設定画面からでは無効化できない (「無効」ボタンがグレーアウトされている) アプリでも使えます。&lt;/p&gt;

&lt;p&gt;なお、有効化するには、設定で「有効」ボタンを押すか、&lt;/p&gt;

&lt;p&gt;以下のコマンドを入力することで有効化できます。&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;adb shell pm enable com.android.contacts
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;使い分け方&quot;&gt;使い分け方&lt;/h2&gt;
&lt;h3 id=&quot;uninstall-1&quot;&gt;uninstall&lt;/h3&gt;
&lt;p&gt;アプリの存在を消すことができるため、&lt;strong&gt;将来的に有効化する可能性がない&lt;/strong&gt;場合に使えます。&lt;/p&gt;

&lt;p&gt;アプリリストに表示されるだけでも&lt;strong&gt;煩わしい&lt;/strong&gt;場合に有効です。&lt;/p&gt;

&lt;p&gt;disable-userを実行してもすぐに復活するアプリにはこれしかありません。&lt;/p&gt;

&lt;p&gt;元に戻すのには、adbコマンドか初期化しかないため、面倒になります。&lt;/p&gt;

&lt;h3 id=&quot;disable-user-1&quot;&gt;disable-user&lt;/h3&gt;
&lt;p&gt;設定画面には残るため、&lt;strong&gt;簡単に有効化できます&lt;/strong&gt;。&lt;/p&gt;

&lt;p&gt;今は使わないけど、&lt;strong&gt;将来的に使うかもしれない&lt;/strong&gt;場合に有効です。&lt;/p&gt;

&lt;p&gt;この方法で無効化しても、再起動で復活する可能性があります。&lt;/p&gt;</content><author><name></name></author><category term="Android" /><category term="備忘録" /><summary type="html">以下の内容は、docomo版Galaxy A20 (SC-02M) の Android 10 で動作確認をしています。 他の機種や、Androidのバージョンによっては使えない可能性もあります。 有名なコマンドも引き続き利用可能 adb shell pm uninstall -k --user 0 &amp;lt;package name&amp;gt; このコマンドは引き続き使えます。 実はあまり知られていないコマンド 次のコマンドも使えることを確認しました。 adb shell pm disable-user &amp;lt;package name&amp;gt; それぞれの挙動の違い uninstall adb shell pm uninstall -k --user 0 &amp;lt;package name&amp;gt; を実行すると、アプリがアンインストールされます。(厳密には/system配下に残存) Androidの設定画面のアプリ一覧からも姿を消すため、 復活させるには以下のコマンドを打つ必要があります。 adb shell pm install-existing &amp;lt;package name&amp;gt; disable-user 試しに実行してみました。 $ adb shell pm disable-user com.android.contacts Package com.android.contacts new state: disabled-user 出力結果の通り、このコマンドは、パッケージに「ユーザーで無効化」属性が付与されます。 つまり、アプリが無効化されています。 そのため、Androidの設定画面から、アプリが無効化されていることが確認できます。 強制的に無効化できるため、設定画面からでは無効化できない (「無効」ボタンがグレーアウトされている) アプリでも使えます。 なお、有効化するには、設定で「有効」ボタンを押すか、 以下のコマンドを入力することで有効化できます。 adb shell pm enable com.android.contacts 使い分け方 uninstall アプリの存在を消すことができるため、将来的に有効化する可能性がない場合に使えます。 アプリリストに表示されるだけでも煩わしい場合に有効です。 disable-userを実行してもすぐに復活するアプリにはこれしかありません。 元に戻すのには、adbコマンドか初期化しかないため、面倒になります。 disable-user 設定画面には残るため、簡単に有効化できます。 今は使わないけど、将来的に使うかもしれない場合に有効です。 この方法で無効化しても、再起動で復活する可能性があります。</summary></entry><entry><title type="html">WindowsでSLを走らせたい</title><link href="https://shiragicord.github.io/200830/sl/" rel="alternate" type="text/html" title="WindowsでSLを走らせたい" /><published>2020-08-30T00:00:00+09:00</published><updated>2020-08-30T00:00:00+09:00</updated><id>https://shiragicord.github.io/200830/sl</id><content type="html" xml:base="https://shiragicord.github.io/200830/sl/">&lt;h2 id=&quot;sl-for-win32-console&quot;&gt;&lt;a href=&quot;https://heropa.blogspot.com/2017/02/sl-for-win32-console.html&quot;&gt;SL for Win32 Console&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;新山(へろぱ) 様により&lt;a href=&quot;https://heropa.blogspot.com/2017/02/sl-for-win32-console.html&quot;&gt;SL for Win32 Console&lt;/a&gt;が公開されているのでそれを使えばOK。&lt;/p&gt;

&lt;p&gt;しかも音が鳴るという&lt;del&gt;謎仕様&lt;/del&gt; &lt;strong&gt;神仕様&lt;/strong&gt;。&lt;/p&gt;

&lt;h2 id=&quot;windows-subsystem-for-linux&quot;&gt;Windows Subsystem for Linux&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;language-ps&quot;&gt;dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;「Windowsの機能の有効化または無効化」よりWSLを有効化。&lt;/p&gt;

&lt;p&gt;再起動後、Microsoft Storeから好きなディストリビューションをダウンロード、インストールして初期設定。&lt;/p&gt;

&lt;p&gt;その後、&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PS &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; wsl.exe
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;WSL&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;WSL&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;sl
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;WSL&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;でSLが拝める。&lt;/p&gt;

&lt;p&gt;PATH内に&lt;/p&gt;
&lt;div class=&quot;language-bat highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@wsl.exe &lt;span class=&quot;kd&quot;&gt;sl&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;をsl.batで保存すれば、直接呼べるようになる。&lt;/p&gt;

&lt;p&gt;ただ、自分の環境だとなぜか爆速でSLが走り去ってしまうので、次の方法を試した。&lt;/p&gt;

&lt;h2 id=&quot;mingw-gcc-でビルド&quot;&gt;MinGW-gcc でビルド&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;language-ps&quot;&gt;git clone https://github.com/mtoyoda/sl.git
cd sl
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;をして &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcc -o sl.exe sl.c&lt;/code&gt; でできるかと思ったらできなかったので、&lt;/p&gt;

&lt;p&gt;結果的に&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-ps&quot;&gt;mingw-get install mingw32-libncurses # すでに行われているなら不要

Set-Variable mingw_path (MinGWのパス)
gcc -I ${mingw_path}\include\ncurses -o sl.exe sl.c ${mingw_path}\lib\libncurses.a
.\sl.exe
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;でできた。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/img/200830-sl-win.gif&quot; alt=&quot;実行した画面&quot; /&gt;&lt;/p&gt;

&lt;p&gt;なんかすごい遅いけど満足満足。&lt;/p&gt;

&lt;p&gt;ちなみにこれを実行した後に、もう一回WSLで実行したらこれぐらい遅くなった…謎。&lt;/p&gt;</content><author><name></name></author><category term="Windows" /><category term="Linux" /><category term="Ubuntu" /><category term="備忘録" /><summary type="html">SL for Win32 Console 新山(へろぱ) 様によりSL for Win32 Consoleが公開されているのでそれを使えばOK。 しかも音が鳴るという謎仕様 神仕様。 Windows Subsystem for Linux dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all 「Windowsの機能の有効化または無効化」よりWSLを有効化。 再起動後、Microsoft Storeから好きなディストリビューションをダウンロード、インストールして初期設定。 その後、 PS &amp;gt; wsl.exe (WSL) $ sudo apt update (WSL) $ sudo apt install sl (WSL) $ sl でSLが拝める。 PATH内に @wsl.exe sl %*% をsl.batで保存すれば、直接呼べるようになる。 ただ、自分の環境だとなぜか爆速でSLが走り去ってしまうので、次の方法を試した。 MinGW-gcc でビルド git clone https://github.com/mtoyoda/sl.git cd sl をして gcc -o sl.exe sl.c でできるかと思ったらできなかったので、 結果的に mingw-get install mingw32-libncurses # すでに行われているなら不要 Set-Variable mingw_path (MinGWのパス) gcc -I ${mingw_path}\include\ncurses -o sl.exe sl.c ${mingw_path}\lib\libncurses.a .\sl.exe でできた。 なんかすごい遅いけど満足満足。 ちなみにこれを実行した後に、もう一回WSLで実行したらこれぐらい遅くなった…謎。</summary></entry><entry><title type="html">Hello, World</title><link href="https://shiragicord.github.io/200823/hello/" rel="alternate" type="text/html" title="Hello, World" /><published>2020-08-23T00:00:00+09:00</published><updated>2020-08-23T00:00:00+09:00</updated><id>https://shiragicord.github.io/200823/hello</id><content type="html" xml:base="https://shiragicord.github.io/200823/hello/">&lt;h1 id=&quot;hello-world&quot;&gt;Hello, World&lt;/h1&gt;

&lt;p&gt;Hello Blog!!&lt;/p&gt;</content><author><name></name></author><summary type="html">Hello, World Hello Blog!!</summary></entry></feed>
<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.1.1">Jekyll</generator><link href="https://shiragicord.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://shiragicord.github.io/" rel="alternate" type="text/html" /><updated>2020-11-12T21:27:57+09:00</updated><id>https://shiragicord.github.io/feed.xml</id><title type="html">しらぎのLogger</title><entry><title type="html">Windows Terminalをそのディレクトリで開くために</title><link href="https://shiragicord.github.io/201103/wt/" rel="alternate" type="text/html" title="Windows Terminalをそのディレクトリで開くために" /><published>2020-11-03T00:00:00+09:00</published><updated>2020-11-03T00:00:00+09:00</updated><id>https://shiragicord.github.io/201103/wt</id><content type="html" xml:base="https://shiragicord.github.io/201103/wt/">&lt;h2 id=&quot;前提&quot;&gt;前提&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Windows 10 Home 64-bit Version 20H2&lt;/li&gt;
  &lt;li&gt;Windows Terminal 1.3.2651.0&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;レジストリ改変時は、事前のバックアップ(エクスポート)を忘れずに！&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;高機能で使いやすく、開発も活発なWindows Terminal
現時点でカレントディレクトリから開くのがまだまだなので、
独自にビルドせずに自分で実装してみました。
&lt;!--more--&gt;&lt;/p&gt;
&lt;h3 id=&quot;カレントディレクトリで開くには&quot;&gt;カレントディレクトリで開くには&lt;/h3&gt;
&lt;p&gt;Githubのリポジトリで&lt;a href=&quot;https://github.com/microsoft/terminal/issues/620#issuecomment-636767661&quot;&gt;このissue&lt;/a&gt;を発見しました。&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;wt -d .
または
wt -d &amp;lt;パス&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;でできる模様です。&lt;/p&gt;

&lt;h1 id=&quot;コマンドラインからの起動の方法を改変&quot;&gt;コマンドラインからの起動の方法を改変&lt;/h1&gt;
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/H_zm_J1Q7lo?disablekb=1&amp;amp;playsinline=1&amp;amp;rel=0&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;p&gt;このような操作をしたときに、エクスプローラーのカレントディレクトリで起動できるようにします。&lt;/p&gt;

&lt;h3 id=&quot;起動用exeを作成&quot;&gt;起動用exeを作成&lt;/h3&gt;
&lt;div class=&quot;language-cs highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Program&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;envPathLocalAppData&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetEnvironmentVariable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;LOCALAPPDATA&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;envPathLocalAppData&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;\\Microsoft\\WindowsApps\\wt.exe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;-d .&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;バッチファイルやVBScriptだと、レジストリPathが動作しないので、exeファイルとして作りました。&lt;/p&gt;

&lt;p&gt;環境変数Pathを作って、既存のレジストリPathを消去する場合はバッチファイルでできます。&lt;/p&gt;

&lt;h3 id=&quot;レジストリの編集&quot;&gt;レジストリの編集&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\wt.exe&lt;/code&gt;の&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;既定&lt;/code&gt;値を&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;作成したexeのパス&lt;/code&gt;、&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Path&lt;/code&gt;値を&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exeのあるフォルダパス&lt;/code&gt;に設定します。&lt;/p&gt;

&lt;h3 id=&quot;explorerexeの再起動&quot;&gt;explorer.exeの再起動&lt;/h3&gt;
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/tvhKOk_mCcE?disablekb=1&amp;amp;playsinline=1&amp;amp;rel=0&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;p&gt;できました。&lt;/p&gt;

&lt;p&gt;ただし、これだといつかレジストリ設定が戻されるので、スタートアップなりサービスなりで値を保護する必要がありそうです。&lt;/p&gt;

&lt;p&gt;もしくは、UWPアプリを自作してwt.exeとして起動するように定義すれば…&lt;/p&gt;

&lt;h1 id=&quot;右クリックメニューを追加&quot;&gt;右クリックメニューを追加&lt;/h1&gt;
&lt;p&gt;現バージョンでは、フォルダーの選択時に&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Open in Windows Terminal&lt;/code&gt;が表示されますが、&lt;/p&gt;

&lt;p&gt;何もない場所を右クリックして開けるようにしたい。&lt;/p&gt;

&lt;p&gt;これは、レジストリを改変するだけで行けました。&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[HKEY_CURRENT_USER\SOFTWARE\Classes\Directory\Background\shell\WindowsTerminal]
@=&quot;Windows Terminal をここで開く&quot;

[HKEY_CURRENT_USER\SOFTWARE\Classes\Directory\Background\shell\WindowsTerminal\command]
@=&quot;C:\\Users\\(ユーザー名)\\AppData\\Local\\Microsoft\\WindowsApps\\wt.exe -d .&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><category term="Windows" /><category term="WindowsTerminal" /><category term="備忘録" /><summary type="html">前提 Windows 10 Home 64-bit Version 20H2 Windows Terminal 1.3.2651.0 レジストリ改変時は、事前のバックアップ(エクスポート)を忘れずに！ 高機能で使いやすく、開発も活発なWindows Terminal 現時点でカレントディレクトリから開くのがまだまだなので、 独自にビルドせずに自分で実装してみました。</summary></entry><entry><title type="html">WindowsでSLを走らせたい</title><link href="https://shiragicord.github.io/200830/sl/" rel="alternate" type="text/html" title="WindowsでSLを走らせたい" /><published>2020-08-30T00:00:00+09:00</published><updated>2020-08-30T00:00:00+09:00</updated><id>https://shiragicord.github.io/200830/sl</id><content type="html" xml:base="https://shiragicord.github.io/200830/sl/">&lt;!--more--&gt;
&lt;h2 id=&quot;sl-for-win32-console&quot;&gt;&lt;a href=&quot;https://heropa.blogspot.com/2017/02/sl-for-win32-console.html&quot;&gt;SL for Win32 Console&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;新山(へろぱ) 様により&lt;a href=&quot;https://heropa.blogspot.com/2017/02/sl-for-win32-console.html&quot;&gt;SL for Win32 Console&lt;/a&gt;が公開されているのでそれを使えばOK。&lt;/p&gt;

&lt;p&gt;しかも音が鳴るという&lt;del&gt;謎仕様&lt;/del&gt; &lt;strong&gt;神仕様&lt;/strong&gt;。&lt;/p&gt;

&lt;h2 id=&quot;windows-subsystem-for-linux&quot;&gt;Windows Subsystem for Linux&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&quot;language-ps&quot;&gt;dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;「Windowsの機能の有効化または無効化」よりWSLを有効化。&lt;/p&gt;

&lt;p&gt;再起動後、Microsoft Storeから好きなディストリビューションをダウンロード、インストールして初期設定。&lt;/p&gt;

&lt;p&gt;その後、&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;PS &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; wsl.exe
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;WSL&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;WSL&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;sl
&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;WSL&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;sl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;でSLが拝める。&lt;/p&gt;

&lt;p&gt;PATH内に&lt;/p&gt;
&lt;div class=&quot;language-bat highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@wsl.exe &lt;span class=&quot;kd&quot;&gt;sl&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;をsl.batで保存すれば、直接呼べるようになる。&lt;/p&gt;

&lt;p&gt;ただ、自分の環境だとなぜか爆速でSLが走り去ってしまうので、次の方法を試した。&lt;/p&gt;

&lt;h2 id=&quot;mingw-gcc-でビルド&quot;&gt;MinGW-gcc でビルド&lt;/h2&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/mtoyoda/sl.git
cd sl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;をして &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gcc -o sl.exe sl.c&lt;/code&gt; でできるかと思ったらできなかったので、&lt;/p&gt;

&lt;p&gt;結果的に&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mingw-get install mingw32-libncurses # すでに行われているなら不要

Set-Variable mingw_path (MinGWのパス)
gcc -I ${mingw_path}\include\ncurses -o sl.exe sl.c ${mingw_path}\lib\libncurses.a
.\sl.exe
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;でできた。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/200830/sl/win.gif&quot; alt=&quot;実行した画面&quot; /&gt;&lt;/p&gt;

&lt;p&gt;なんかすごい遅いけど満足満足。&lt;/p&gt;

&lt;p&gt;ちなみにこれを実行した後に、もう一回WSLで実行したらこれぐらい遅くなった…謎。&lt;/p&gt;</content><author><name></name></author><category term="Windows" /><category term="Linux" /><category term="Ubuntu" /><category term="備忘録" /><summary type="html"></summary></entry><entry><title type="html">Hello, World</title><link href="https://shiragicord.github.io/200823/hello/" rel="alternate" type="text/html" title="Hello, World" /><published>2020-08-23T00:00:00+09:00</published><updated>2020-08-23T00:00:00+09:00</updated><id>https://shiragicord.github.io/200823/hello</id><content type="html" xml:base="https://shiragicord.github.io/200823/hello/">&lt;!--more--&gt;
&lt;h1 id=&quot;hello-world&quot;&gt;Hello, World&lt;/h1&gt;

&lt;p&gt;Hello Blog!!&lt;/p&gt;</content><author><name></name></author><summary type="html"></summary></entry></feed>